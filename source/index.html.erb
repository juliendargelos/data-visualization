<%= embed_data :characters %>
<%= embed_data :genders %>
<%= embed_data :geographic_zones %>
<%= embed_data :specialities %>
<%= embed_data :zone_types %>

<%= templates %>

<main class="machine">
  <div class="machine__extra machine__extra--left"></div>

  <div class="machine__main">
    <div class="machine__head">
      <div class="machine__head-top"></div>

      <div class="machine__head-front">
        <section class="machine__controls">

        </section>
      </div>

      <div class="machine__head-bottom">
        <div class="machine__bolt"></div>
        <div class="machine__bolt"></div>
        <div class="machine__bolt"></div>
        <div class="machine__bolt"></div>
        <div class="machine__bolt"></div>
      </div>
    </div>

    <div class="machine__body">
      <div class="machine__body-top"></div>
      <div class="machine__body-front">
        <section class="machine__pane">
          <div class="characters"></div>
        </section>
      </div>
    </div>
  </div>

  <div class="machine__extra machine__extra--right"></div>
  <div class="machine__extra machine__extra--bottom"></div>
</main>

<%= javascript_include_tag :application %>

<script>
  Application.initialize();

  // TODO: remove
  // c = Application.Model.Character.first;
  // document.body.appendChild(c.element);
  // setInterval(() => {
  //   Application.Model.Character.all.forEach(c => {
  //     var f = c.flexibility;
  //     while(c.flexibility === f) c.flexibility = Math.floor(Math.random()*10);
  //     c.render();
  //   })
  // }, 400);

  var characters = document.querySelector('.characters');

  Application.Model.Character.all.forEach(character => {
    var box = document.createElement('div');
    box.className = 'characters__box';
    box.appendChild(character.element);

    characters.appendChild(box);
  });
</script>
